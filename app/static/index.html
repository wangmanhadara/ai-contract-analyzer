<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>AI Contract / Lease Analyzer</title>
  <style>
    body { font-family: Arial; max-width: 900px; margin: 30px auto; }
    textarea { width: 100%; height: 180px; }
    pre { background: #f6f6f6; padding: 12px; overflow: auto; }
    .row { margin: 12px 0; }
    button { margin-right: 10px; }
  </style>
</head>
<body>
  <h2>AI Contract / Lease Analyzer</h2>
  <p>Upload a PDF contract/lease or paste text to extract key terms, risk flags, and questions to ask. (Informational only â€” not legal advice.)</p>

  <div class="row">
    <label><b>Paste contract text:</b></label><br/>
    <textarea id="text" placeholder="Paste contract or lease text here..."></textarea>
  </div>

  <div class="row">
    <label><b>Or upload a PDF:</b></label>
    <input type="file" id="file" accept="application/pdf"/>
  </div>

  <button onclick="analyze()">Analyze</button>
  <button onclick="loadHistory()">View History</button>

  <h3>Result</h3>
  <pre id="out">(waiting...)</pre>

<script>
async function analyze() {
  const out = document.getElementById('out');
  out.textContent = 'Analyzing...';

  const text = document.getElementById('text').value.trim();
  const file = document.getElementById('file').files[0];

  const form = new FormData();
  if (text) form.append('text', text);
  if (file) form.append('file', file);

  const res = await fetch('/api/analyze', { method: 'POST', body: form });
  const json = await res.json();
  out.textContent = JSON.stringify(json, null, 2);
}

async function loadHistory() {
  const out = document.getElementById('out');
  out.textContent = 'Loading history...';
  const res = await fetch('/api/history');
  const json = await res.json();
  out.textContent = JSON.stringify(json, null, 2);
}
</script>
</body>
</html>
